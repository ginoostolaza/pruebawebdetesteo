<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | Gino Ostolaza</title>

  <!-- Auth guard -->
  <script>
    (function () {
      const acceso = sessionStorage.getItem("accesoAutorizado");
      if (!acceso || acceso !== "true") {
        window.location.replace("iniciar-sesion.html");
      }
    })();
  </script>

  <link rel="icon" href="assets/img/branding/logo-favicon.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/dashboard.css">
  <meta name="theme-color" content="#0a0e17">
</head>
<body>

<!-- ============================================================
     TOP NAVIGATION
     ============================================================ -->
<nav class="dash-nav">
  <div class="dash-nav-left">
    <img class="dash-nav-logo" src="assets/img/branding/logo-favicon.png" alt="Logo" width="32" height="32">
    <span class="dash-nav-brand">Gino Ostolaza</span>
    <span class="dash-nav-tag">Alumno</span>
  </div>
  <div class="dash-nav-right">
    <div class="dash-nav-user">
      <div class="user-avatar" id="user-avatar">U</div>
      <span id="user-name-nav">Usuario</span>
    </div>
    <button class="btn-logout" id="btn-logout">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"/></svg>
      Salir
    </button>
  </div>
</nav>

<!-- ============================================================
     MAIN CONTENT
     ============================================================ -->
<div class="dash-container">

  <!-- Welcome -->
  <div class="dash-welcome">
    <div class="welcome-row">
      <div class="welcome-text">
        <h1>Bienvenido, <span id="user-name">Usuario</span></h1>
        <p>Tu centro de aprendizaje y crecimiento en trading</p>
      </div>
      <div class="welcome-date" id="welcome-date">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
      </div>
    </div>
  </div>

  <!-- Quick Stats -->
  <div class="dash-stats">
    <div class="stat-card">
      <div class="stat-icon blue">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
      </div>
      <div class="stat-value">2</div>
      <div class="stat-label">Sistemas disponibles</div>
    </div>
    <div class="stat-card">
      <div class="stat-icon green">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="M22 4 12 14.01l-3-3"/></svg>
      </div>
      <div class="stat-value">Activo</div>
      <div class="stat-label">Estado de tu cuenta</div>
    </div>
    <div class="stat-card">
      <div class="stat-icon purple">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
      </div>
      <div class="stat-value">Fase 1</div>
      <div class="stat-label">Tu nivel actual</div>
    </div>
    <div class="stat-card">
      <div class="stat-icon cyan">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
      </div>
      <div class="stat-value">24/7</div>
      <div class="stat-label">Acceso al contenido</div>
    </div>
  </div>

  <!-- Course Cards -->
  <h2 class="section-title">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
    Tu contenido
  </h2>

  <div class="dash-grid">

    <!-- Curso de Trading -->
    <div class="course-card card-blue">
      <div class="card-header">
        <div class="card-icon blue">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
        </div>
        <span class="card-badge badge-active">Disponible</span>
      </div>
      <h3 class="card-title">Curso de Trading — Fase 1</h3>
      <p class="card-desc">Sistemas probados, preparacion del grafico, estrategias Flexzone y Relleno de Zona, glosario y consejos avanzados.</p>
      <ul class="card-features">
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          2 sistemas de trading efectivos
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          Preparacion del grafico paso a paso
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          Consejos, glosario y errores a evitar
        </li>
      </ul>
      <a href="acceso-comunidad.html" class="card-action action-primary">
        Acceder al curso
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
      </a>
    </div>

    <!-- Mentoria -->
    <div class="course-card card-purple">
      <div class="card-header">
        <div class="card-icon purple">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
        </div>
        <span class="card-badge badge-soon">Proximamente</span>
      </div>
      <h3 class="card-title">Mentoria Personalizada</h3>
      <p class="card-desc">Sesiones 1 a 1 con Gino para resolver dudas, revisar operaciones y potenciar tu crecimiento como trader.</p>
      <ul class="card-features">
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          Revision de operaciones en vivo
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          Feedback personalizado
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          Psicotrading y desarrollo personal
        </li>
      </ul>
      <span class="card-action action-disabled">
        Disponible pronto
      </span>
    </div>

    <!-- Comunidad -->
    <div class="course-card card-green">
      <div class="card-header">
        <div class="card-icon green">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        </div>
        <span class="card-badge badge-soon">Proximamente</span>
      </div>
      <h3 class="card-title">Comunidad Privada</h3>
      <p class="card-desc">Conecta con otros traders, comparte analisis, resultados y crece en un entorno motivador y de alto nivel.</p>
      <ul class="card-features">
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          Grupo exclusivo de alumnos
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          Analisis compartidos
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          Soporte entre pares
        </li>
      </ul>
      <span class="card-action action-disabled">
        Disponible pronto
      </span>
    </div>

    <!-- Bot de Trading -->
    <div class="course-card card-cyan">
      <div class="card-header">
        <div class="card-icon cyan">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1.07A7 7 0 0 1 14 23h-4a7 7 0 0 1-6.93-4H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2z"/></svg>
        </div>
        <span class="card-badge badge-new">Nuevo</span>
      </div>
      <h3 class="card-title">Bot de Trading</h3>
      <p class="card-desc">Bot automatizado configurado por Gino, opera 24/7 por vos. Solo conectalo y dejalo trabajar.</p>
      <ul class="card-features">
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          Operacion automatica 24/7
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          Actualizaciones incluidas
        </li>
        <li>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
          Soporte de instalacion
        </li>
      </ul>
      <a href="finalizar-compra.html?plan=bot" class="card-action action-outline">
        Suscribirme — $5 USD/mes
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
      </a>
    </div>

  </div>

  <!-- Quick Links -->
  <h2 class="section-title">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
    Accesos rapidos
  </h2>

  <div class="quick-links">
    <a href="https://instagram.com/ginoostolaza_" target="_blank" rel="noopener noreferrer" class="quick-link">
      <div class="quick-link-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
      </div>
      <div>
        <div class="quick-link-text">Contactar a Gino</div>
        <div class="quick-link-sub">Instagram directo</div>
      </div>
    </a>

    <a href="acceso-comunidad.html#glosario" class="quick-link">
      <div class="quick-link-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
      </div>
      <div>
        <div class="quick-link-text">Glosario de Trading</div>
        <div class="quick-link-sub">Terminos esenciales</div>
      </div>
    </a>

    <a href="index.html" class="quick-link">
      <div class="quick-link-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
      </div>
      <div>
        <div class="quick-link-text">Pagina principal</div>
        <div class="quick-link-sub">Volver al inicio</div>
      </div>
    </a>
  </div>

</div>

<!-- Supabase Auth -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="assets/js/supabase-config.js"></script>
<script src="assets/js/auth.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", async () => {
    // --- Validate session with Supabase ---
    Auth.init();
    await Auth.guard();

    // --- Load user data ---
    const userData = JSON.parse(sessionStorage.getItem("usuario") || "{}");
    const nombre = userData.nombre || "Usuario";
    const inicial = nombre.charAt(0).toUpperCase();

    document.getElementById("user-name").textContent = nombre;
    document.getElementById("user-name-nav").textContent = nombre;
    document.getElementById("user-avatar").textContent = inicial;

    // --- Date ---
    const now = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    const dateStr = now.toLocaleDateString('es-AR', options);
    document.getElementById("welcome-date").insertAdjacentText('beforeend', dateStr.charAt(0).toUpperCase() + dateStr.slice(1));

    // --- Logout ---
    document.getElementById("btn-logout").addEventListener("click", async () => {
      await Auth.logout();
      window.location.href = "iniciar-sesion.html";
    });

    // --- Tab title ---
    document.addEventListener("visibilitychange", () => {
      document.title = document.hidden ? "Volvemos pronto..." : "Dashboard | Gino Ostolaza";
    });
  });
</script>

</body>
</html>
